{"version":3,"sources":["src/server/bridges/EnvironmentalVariableBridge.ts"],"names":[],"mappings":";;;;;;;;;;;;AAAA,2EAAwE;AACxE,2EAAwE;AACxE,kEAA+D;AAC/D,6CAA0C;AAE1C,MAAsB,2BAA4B,SAAQ,uBAAU;IACpD,gBAAgB,CAAC,UAAkB,EAAE,KAAa;;YAC3D,IAAI,IAAI,CAAC,iBAAiB,CAAC,KAAK,CAAC,EAAE;gBAC/B,OAAO,IAAI,CAAC,cAAc,CAAC,UAAU,EAAE,KAAK,CAAC,CAAC;aACjD;QACJ,CAAC;KAAA;IAEW,YAAY,CAAC,UAAkB,EAAE,KAAa;;YACvD,IAAI,IAAI,CAAC,iBAAiB,CAAC,KAAK,CAAC,EAAE;gBAC/B,OAAO,IAAI,CAAC,UAAU,CAAC,UAAU,EAAE,KAAK,CAAC,CAAC;aAC7C;QACJ,CAAC;KAAA;IAEW,OAAO,CAAC,UAAkB,EAAE,KAAa;;YAClD,IAAI,IAAI,CAAC,iBAAiB,CAAC,KAAK,CAAC,EAAE;gBAC/B,OAAO,IAAI,CAAC,KAAK,CAAC,UAAU,EAAE,KAAK,CAAC,CAAC;aACxC;QACJ,CAAC;KAAA;IAMO,iBAAiB,CAAC,KAAa;QACnC,IAAI,2CAAoB,CAAC,aAAa,CAAC,KAAK,EAAE,+BAAc,CAAC,GAAG,CAAC,IAAI,CAAC,EAAE;YACpE,OAAO,IAAI,CAAC;SACf;QAED,2CAAoB,CAAC,gBAAgB,CAAC,IAAI,6CAAqB,CAAC;YAC5D,KAAK;YACL,kBAAkB,EAAE,CAAC,+BAAc,CAAC,GAAG,CAAC,IAAI,CAAC;SAChD,CAAC,CAAC,CAAC;QAEJ,OAAO,KAAK,CAAC;IACjB,CAAC;CACJ;AAnCD,kEAmCC","file":"EnvironmentalVariableBridge.js","sourcesContent":["import { PermissionDeniedError } from '../errors/PermissionDeniedError';\nimport { AppPermissionManager } from '../managers/AppPermissionManager';\nimport { AppPermissions } from '../permissions/AppPermissions';\nimport { BaseBridge } from './BaseBridge';\n\nexport abstract class EnvironmentalVariableBridge extends BaseBridge {\n   public async doGetValueByName(envVarName: string, appId: string): Promise<string | undefined> {\n       if (this.hasReadPermission(appId)) {\n           return this.getValueByName(envVarName, appId);\n       }\n    }\n\n   public async doIsReadable(envVarName: string, appId: string): Promise<boolean> {\n       if (this.hasReadPermission(appId)) {\n           return this.isReadable(envVarName, appId);\n       }\n    }\n\n   public async doIsSet(envVarName: string, appId: string): Promise<boolean> {\n       if (this.hasReadPermission(appId)) {\n           return this.isSet(envVarName, appId);\n       }\n    }\n\n   protected abstract getValueByName(envVarName: string, appId: string): Promise<string | undefined>;\n   protected abstract isReadable(envVarName: string, appId: string): Promise<boolean>;\n   protected abstract isSet(envVarName: string, appId: string): Promise<boolean>;\n\n    private hasReadPermission(appId: string): boolean {\n        if (AppPermissionManager.hasPermission(appId, AppPermissions.env.read)) {\n            return true;\n        }\n\n        AppPermissionManager.notifyAboutError(new PermissionDeniedError({\n            appId,\n            missingPermissions: [AppPermissions.env.read],\n        }));\n\n        return false;\n    }\n}\n"]}